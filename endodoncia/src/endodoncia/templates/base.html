<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{{ site_title }}</title>
    <link rel="stylesheet" href="/assets/styles.css" />
    <script src="/assets/animations.js" defer></script>
  </head>
  <body>
    <header class="site-header">
      <!-- Top contact bar -->
      <div class="top-contact-bar">
        <div class="container">
          <div class="contact-info">
            <span class="address-text">{{ site_address }}</span>
            <a href="{{ site_phone_link }}" class="phone-number">{{ site_phone }}</a>
          </div>
        </div>
      </div>
      
      <!-- Main navigation -->
      <nav class="main-navbar">
        <div class="container">
          <div class="navbar-content">
            <div class="nav-brand">
              <a href="/" class="brand-link">Endodoncia</a>
            </div>
            
            <div class="nav-menu" id="navMenu">
              <a href="/" class="nav-link">{{ menu_home }}</a>
              <a href="/contacto/" class="nav-link">{{ menu_about }}</a>
              <div class="nav-dropdown">
                <button class="dropdown-toggle" onclick="toggleDropdown(event)">
                  {{ menu_services }}
                  <span class="dropdown-icon">â–¼</span>
                </button>
                <div class="dropdown-menu">
                  {% for svc in services %}
                  <a href="/{{ svc.slug }}/" class="dropdown-link">{{ svc.title }}</a>
                  {% endfor %}
                </div>
              </div>
              <a href="/contacto/" class="nav-link nav-contact">{{ menu_contact }}</a>
            </div>
            
            <button class="mobile-toggle" onclick="toggleMobileMenu()" id="mobileToggle">
              <span class="mobile-line"></span>
              <span class="mobile-line"></span>
              <span class="mobile-line"></span>
            </button>
          </div>
        </div>
      </nav>
    </header>

    <main>
      {% block content %}{% endblock %}
    </main>

    <footer class="site-footer">
      <div class="footer-content">
        <div class="footer-section">
          <h4>Contacto</h4>
          <p>{{ site_address }}</p>
          <p><a href="{{ site_phone_link }}">{{ site_phone }}</a></p>
        </div>
        <div class="footer-section">
          <h4>Horarios</h4>
          <p>Lunes a viernes de 8:30 a 19:30</p>
        </div>
        <div class="footer-section">
          <h4>Servicios</h4>
          <ul>
            {% for svc in services %}
            <li><a href="/{{ svc.slug }}/">{{ svc.title }}</a></li>
            {% endfor %}
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2024 Endodoncia Especializada. Todos los derechos reservados.</p>
      </div>
    </footer>

    <script>
      function toggleMobileMenu() {
        const navMenu = document.getElementById('navMenu');
        const toggle = document.getElementById('mobileToggle');
        
        navMenu.classList.toggle('mobile-active');
        toggle.classList.toggle('active');
      }
      
      function toggleDropdown(event) {
        event.preventDefault();
        const dropdown = event.target.closest('.nav-dropdown');
        const menu = dropdown.querySelector('.dropdown-menu');
        const icon = dropdown.querySelector('.dropdown-icon');
        
        // Close other dropdowns
        document.querySelectorAll('.dropdown-menu').forEach(otherMenu => {
          if (otherMenu !== menu) {
            otherMenu.classList.remove('show');
          }
        });
        document.querySelectorAll('.dropdown-icon').forEach(otherIcon => {
          if (otherIcon !== icon) {
            otherIcon.style.transform = '';
          }
        });
        
        menu.classList.toggle('show');
        icon.style.transform = menu.classList.contains('show') ? 'rotate(180deg)' : '';
      }
      
      // Close mobile menu when clicking outside
      document.addEventListener('click', function(event) {
        const navMenu = document.getElementById('navMenu');
        const toggle = document.getElementById('mobileToggle');
        
        if (!toggle.contains(event.target) && !navMenu.contains(event.target)) {
          navMenu.classList.remove('mobile-active');
          toggle.classList.remove('active');
        }
      });
      
      // Close dropdown when clicking outside
      document.addEventListener('click', function(event) {
        if (!event.target.closest('.nav-dropdown')) {
          document.querySelectorAll('.dropdown-menu').forEach(menu => {
            menu.classList.remove('show');
          });
          document.querySelectorAll('.dropdown-icon').forEach(icon => {
            icon.style.transform = '';
          });
        }
      });
    </script>
  </body>
  </html>


